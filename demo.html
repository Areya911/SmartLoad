<!doctype html>
<html lang="en" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SmartLoad - Logistics Optimization Platform</title>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
        body {
            box-sizing: border-box;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #0f766e 0%, #0891b2 100%);
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        .stat-card {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
        }
        
        .btn-primary {
            transition: all 0.2s ease;
        }
        
        .btn-primary:hover {
            transform: scale(1.02);
        }
        
        .chart-bar {
            transition: width 0.5s ease;
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full">
  <div id="app" class="w-full h-full overflow-auto bg-gray-50"></div>
  <script>
        const defaultConfig = {
            platform_name: "SmartLoad",
            tagline: "Intelligent Truck Loading & Logistics Optimization Platform",
            primary_cta: "Get Started",
            secondary_cta: "Learn More",
            primary_color: "#0891b2",
            secondary_color: "#10b981",
            background_color: "#f9fafb",
            text_color: "#1f2937",
            accent_color: "#0f766e",
            font_family: "Inter",
            font_size: 16
        };

        let currentPage = 'landing';
        let userRole = null;
        let shipments = [];
        let trucks = [];
        let bookingRequests = [];

        function onConfigChange(config) {
            const customFont = config.font_family || defaultConfig.font_family;
            const baseSize = config.font_size || defaultConfig.font_size;
            const primaryColor = config.primary_color || defaultConfig.primary_color;
            const secondaryColor = config.secondary_color || defaultConfig.secondary_color;
            const backgroundColor = config.background_color || defaultConfig.background_color;
            const textColor = config.text_color || defaultConfig.text_color;
            const accentColor = config.accent_color || defaultConfig.accent_color;

            document.body.style.fontFamily = `${customFont}, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif`;
            document.body.style.fontSize = `${baseSize}px`;
            document.body.style.backgroundColor = backgroundColor;

            const app = document.getElementById('app');
            if (app) {
                app.style.backgroundColor = backgroundColor;
            }

            const allText = document.querySelectorAll('h1, h2, h3, h4, h5, h6, p, span, label, button, a, input, textarea');
            allText.forEach(el => {
                if (!el.classList.contains('text-white')) {
                    el.style.color = textColor;
                }
            });

            const primaryButtons = document.querySelectorAll('.btn-primary');
            primaryButtons.forEach(btn => {
                btn.style.backgroundColor = primaryColor;
                btn.style.borderColor = primaryColor;
            });

            const secondaryButtons = document.querySelectorAll('.btn-secondary');
            secondaryButtons.forEach(btn => {
                btn.style.backgroundColor = secondaryColor;
                btn.style.borderColor = secondaryColor;
            });

            const gradientBg = document.querySelector('.gradient-bg');
            if (gradientBg) {
                gradientBg.style.background = `linear-gradient(135deg, ${accentColor} 0%, ${primaryColor} 100%)`;
            }

            const platformNameElements = document.querySelectorAll('.platform-name');
            platformNameElements.forEach(el => {
                el.textContent = config.platform_name || defaultConfig.platform_name;
            });

            const taglineElement = document.querySelector('.tagline');
            if (taglineElement) {
                taglineElement.textContent = config.tagline || defaultConfig.tagline;
            }

            const primaryCtaElements = document.querySelectorAll('.primary-cta-text');
            primaryCtaElements.forEach(el => {
                el.textContent = config.primary_cta || defaultConfig.primary_cta;
            });

            const secondaryCtaElements = document.querySelectorAll('.secondary-cta-text');
            secondaryCtaElements.forEach(el => {
                el.textContent = config.secondary_cta || defaultConfig.secondary_cta;
            });
        }

        function renderPage() {
            const app = document.getElementById('app');
            const pages = {
                'landing': renderLanding,
                'login': renderLogin,
                'signup': renderSignup,
                'warehouse-dashboard': renderWarehouseDashboard,
                'create-shipment': renderCreateShipment,
                'optimization-results': renderOptimizationResults,
                'dealer-dashboard': renderDealerDashboard,
                'add-truck': renderAddTruck,
                'analytics': renderAnalytics
            };
            
            app.innerHTML = pages[currentPage]();
            onConfigChange(window.elementSdk?.config || defaultConfig);
        }

        function navigateTo(page) {
            currentPage = page;
            renderPage();
        }

        function renderNavbar(showAuth = false) {
            const config = window.elementSdk?.config || defaultConfig;
            return `
                <nav class="bg-white shadow-sm">
                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                        <div class="flex justify-between items-center h-16">
                            <div class="flex items-center cursor-pointer" onclick="navigateTo('${userRole ? (userRole === 'warehouse' ? 'warehouse-dashboard' : 'dealer-dashboard') : 'landing'}')">
                                <svg class="w-8 h-8 mr-2" style="color: ${config.primary_color || defaultConfig.primary_color}" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/>
                                </svg>
                                <span class="platform-name text-2xl font-bold" style="color: ${config.primary_color || defaultConfig.primary_color}">${config.platform_name || defaultConfig.platform_name}</span>
                            </div>
                            ${showAuth ? `
                                <div class="flex gap-3">
                                    <button onclick="navigateTo('login')" class="px-4 py-2 text-sm font-medium rounded-lg border border-gray-300 hover:bg-gray-50">
                                        Login
                                    </button>
                                    <button onclick="navigateTo('signup')" class="btn-primary px-4 py-2 text-sm font-medium text-white rounded-lg">
                                        <span class="primary-cta-text">Sign Up</span>
                                    </button>
                                </div>
                            ` : userRole ? `
                                <div class="flex items-center gap-4">
                                    ${userRole === 'warehouse' ? `
                                        <button onclick="navigateTo('warehouse-dashboard')" class="text-sm font-medium hover:opacity-70">Dashboard</button>
                                        <button onclick="navigateTo('analytics')" class="text-sm font-medium hover:opacity-70">Analytics</button>
                                    ` : `
                                        <button onclick="navigateTo('dealer-dashboard')" class="text-sm font-medium hover:opacity-70">Dashboard</button>
                                        <button onclick="navigateTo('analytics')" class="text-sm font-medium hover:opacity-70">Analytics</button>
                                    `}
                                    <button onclick="logout()" class="text-sm font-medium text-red-600 hover:opacity-70">Logout</button>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                </nav>
            `;
        }

        function renderLanding() {
            const config = window.elementSdk?.config || defaultConfig;
            return `
                ${renderNavbar(true)}
                <div class="w-full">
                    <!-- Hero Section -->
                    <div class="gradient-bg text-white py-20">
                        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                            <h1 class="tagline text-5xl font-bold mb-6">${config.tagline || defaultConfig.tagline}</h1>
                            <p class="text-xl mb-8 opacity-90">Reduce costs and emissions with intelligent load optimization. Match shipments with the perfect trucks.</p>
                            <div class="flex gap-4 justify-center">
                                <button onclick="navigateTo('signup')" class="bg-white px-8 py-3 rounded-lg font-semibold text-lg btn-primary" style="color: ${config.primary_color || defaultConfig.primary_color}">
                                    <span class="primary-cta-text">${config.primary_cta || defaultConfig.primary_cta}</span>
                                </button>
                                <button onclick="navigateTo('analytics')" class="border-2 border-white text-white px-8 py-3 rounded-lg font-semibold text-lg hover:bg-white hover:bg-opacity-10">
                                    <span class="secondary-cta-text">${config.secondary_cta || defaultConfig.secondary_cta}</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- How It Works -->
                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20">
                        <h2 class="text-4xl font-bold text-center mb-16">How It Works</h2>
                        <div class="grid md:grid-cols-3 gap-8">
                            <div class="card-hover bg-white p-8 rounded-xl shadow-md text-center">
                                <div class="w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center" style="background-color: ${config.primary_color || defaultConfig.primary_color}20">
                                    <svg class="w-8 h-8" style="color: ${config.primary_color || defaultConfig.primary_color}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                                    </svg>
                                </div>
                                <h3 class="text-xl font-bold mb-3">1. Upload Shipment</h3>
                                <p class="text-gray-600">Enter shipment details including weight, volume, and destination</p>
                            </div>
                            <div class="card-hover bg-white p-8 rounded-xl shadow-md text-center">
                                <div class="w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center" style="background-color: ${config.secondary_color || defaultConfig.secondary_color}20">
                                    <svg class="w-8 h-8" style="color: ${config.secondary_color || defaultConfig.secondary_color}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                                    </svg>
                                </div>
                                <h3 class="text-xl font-bold mb-3">2. Optimize Loads</h3>
                                <p class="text-gray-600">Our AI finds the best truck matches for maximum efficiency</p>
                            </div>
                            <div class="card-hover bg-white p-8 rounded-xl shadow-md text-center">
                                <div class="w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center" style="background-color: ${config.accent_color || defaultConfig.accent_color}20">
                                    <svg class="w-8 h-8" style="color: ${config.accent_color || defaultConfig.accent_color}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                                    </svg>
                                </div>
                                <h3 class="text-xl font-bold mb-3">3. Track & Analyze</h3>
                                <p class="text-gray-600">Monitor utilization, cost savings, and CO₂ reduction</p>
                            </div>
                        </div>
                    </div>

                    <!-- Benefits -->
                    <div class="bg-white py-20">
                        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                            <h2 class="text-4xl font-bold text-center mb-16">Key Benefits</h2>
                            <div class="grid md:grid-cols-3 gap-8">
                                <div class="text-center">
                                    <div class="text-5xl font-bold mb-2" style="color: ${config.primary_color || defaultConfig.primary_color}">85%</div>
                                    <div class="text-xl font-semibold mb-2">Better Utilization</div>
                                    <p class="text-gray-600">Maximize truck capacity and reduce empty miles</p>
                                </div>
                                <div class="text-center">
                                    <div class="text-5xl font-bold mb-2" style="color: ${config.secondary_color || defaultConfig.secondary_color}">30%</div>
                                    <div class="text-xl font-semibold mb-2">Lower Costs</div>
                                    <p class="text-gray-600">Reduce operational expenses through optimization</p>
                                </div>
                                <div class="text-center">
                                    <div class="text-5xl font-bold mb-2" style="color: ${config.accent_color || defaultConfig.accent_color}">40%</div>
                                    <div class="text-xl font-semibold mb-2">CO₂ Reduction</div>
                                    <p class="text-gray-600">Lower carbon footprint with fewer trips</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderLogin() {
            return `
                ${renderNavbar(true)}
                <div class="w-full min-h-screen flex items-center justify-center py-12 px-4">
                    <div class="bg-white p-8 rounded-xl shadow-lg max-w-md w-full">
                        <h2 class="text-3xl font-bold mb-6 text-center">Login to <span class="platform-name">SmartLoad</span></h2>
                        <form onsubmit="handleLogin(event)" class="space-y-4">
                            <div>
                                <label for="login-email" class="block text-sm font-medium mb-2">Email Address</label>
                                <input type="email" id="login-email" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="you@example.com">
                            </div>
                            <div>
                                <label for="login-password" class="block text-sm font-medium mb-2">Password</label>
                                <input type="password" id="login-password" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="••••••••">
                            </div>
                            <button type="submit" class="btn-primary w-full text-white py-3 rounded-lg font-semibold">
                                Login
                            </button>
                        </form>
                        <p class="text-center mt-4 text-sm">
                            Don't have an account? 
                            <button onclick="navigateTo('signup')" class="font-semibold hover:underline" style="color: ${(window.elementSdk?.config || defaultConfig).primary_color}">Sign up</button>
                        </p>
                    </div>
                </div>
            `;
        }

        function renderSignup() {
            return `
                ${renderNavbar(true)}
                <div class="w-full min-h-screen flex items-center justify-center py-12 px-4">
                    <div class="bg-white p-8 rounded-xl shadow-lg max-w-md w-full">
                        <h2 class="text-3xl font-bold mb-6 text-center">Join <span class="platform-name">SmartLoad</span></h2>
                        <form onsubmit="handleSignup(event)" class="space-y-4">
                            <div>
                                <label for="signup-email" class="block text-sm font-medium mb-2">Email Address</label>
                                <input type="email" id="signup-email" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="you@example.com">
                            </div>
                            <div>
                                <label for="signup-password" class="block text-sm font-medium mb-2">Password</label>
                                <input type="password" id="signup-password" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="••••••••">
                            </div>
                            <div>
                                <label for="signup-role" class="block text-sm font-medium mb-2">I am a...</label>
                                <select id="signup-role" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    <option value="">Select your role</option>
                                    <option value="warehouse">Warehouse User</option>
                                    <option value="dealer">Truck Dealer</option>
                                </select>
                            </div>
                            <button type="submit" class="btn-primary w-full text-white py-3 rounded-lg font-semibold">
                                Create Account
                            </button>
                        </form>
                        <p class="text-center mt-4 text-sm">
                            Already have an account? 
                            <button onclick="navigateTo('login')" class="font-semibold hover:underline" style="color: ${(window.elementSdk?.config || defaultConfig).primary_color}">Login</button>
                        </p>
                    </div>
                </div>
            `;
        }

        function renderWarehouseDashboard() {
            return `
                ${renderNavbar()}
                <div class="w-full min-h-screen">
                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                        <div class="mb-8">
                            <h1 class="text-3xl font-bold mb-2">Warehouse Dashboard</h1>
                            <p class="text-gray-600">Manage your shipments and optimize truck loading</p>
                        </div>

                        <!-- Stats Grid -->
                        <div class="grid md:grid-cols-4 gap-6 mb-8">
                            <div class="stat-card">
                                <div class="text-sm font-medium text-gray-600 mb-1">Total Shipments</div>
                                <div class="text-3xl font-bold mb-1">${shipments.length}</div>
                                <div class="text-xs text-gray-500">All time</div>
                            </div>
                            <div class="stat-card">
                                <div class="text-sm font-medium text-gray-600 mb-1">Active Shipments</div>
                                <div class="text-3xl font-bold mb-1">${shipments.filter(s => s.status === 'active').length}</div>
                                <div class="text-xs text-green-600">+${Math.floor(Math.random() * 5)} this week</div>
                            </div>
                            <div class="stat-card">
                                <div class="text-sm font-medium text-gray-600 mb-1">Avg Utilization</div>
                                <div class="text-3xl font-bold mb-1">78%</div>
                                <div class="text-xs text-green-600">+5% from last month</div>
                            </div>
                            <div class="stat-card">
                                <div class="text-sm font-medium text-gray-600 mb-1">CO₂ Saved</div>
                                <div class="text-3xl font-bold mb-1">2.4t</div>
                                <div class="text-xs text-gray-500">This month</div>
                            </div>
                        </div>

                        <!-- Actions -->
                        <div class="flex gap-4 mb-8">
                            <button onclick="navigateTo('create-shipment')" class="btn-primary px-6 py-3 text-white rounded-lg font-semibold flex items-center gap-2">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                                </svg>
                                Create New Shipment
                            </button>
                            <button onclick="runOptimization()" class="btn-secondary px-6 py-3 text-white rounded-lg font-semibold flex items-center gap-2">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                                </svg>
                                Run Optimization
                            </button>
                        </div>

                        <!-- Recent Shipments -->
                        <div class="bg-white rounded-xl shadow-md p-6">
                            <h2 class="text-xl font-bold mb-4">Recent Shipments</h2>
                            ${shipments.length === 0 ? `
                                <div class="text-center py-12 text-gray-500">
                                    <svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"/>
                                    </svg>
                                    <p>No shipments yet. Create your first shipment to get started!</p>
                                </div>
                            ` : `
                                <div class="overflow-x-auto">
                                    <table class="w-full">
                                        <thead class="border-b">
                                            <tr class="text-left text-sm font-medium text-gray-600">
                                                <th class="pb-3">Name</th>
                                                <th class="pb-3">Weight</th>
                                                <th class="pb-3">Volume</th>
                                                <th class="pb-3">Destination</th>
                                                <th class="pb-3">Status</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            ${shipments.map(s => `
                                                <tr class="border-b hover:bg-gray-50">
                                                    <td class="py-3 font-medium">${s.name}</td>
                                                    <td class="py-3">${s.weight} kg</td>
                                                    <td class="py-3">${s.volume} m³</td>
                                                    <td class="py-3">${s.destination}</td>
                                                    <td class="py-3">
                                                        <span class="px-2 py-1 rounded-full text-xs font-medium ${s.status === 'active' ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'}">
                                                            ${s.status}
                                                        </span>
                                                    </td>
                                                </tr>
                                            `).join('')}
                                        </tbody>
                                    </table>
                                </div>
                            `}
                        </div>
                    </div>
                </div>
            `;
        }

        function renderCreateShipment() {
            return `
                ${renderNavbar()}
                <div class="w-full min-h-screen">
                    <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                        <button onclick="navigateTo('warehouse-dashboard')" class="flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                            </svg>
                            Back to Dashboard
                        </button>

                        <div class="bg-white rounded-xl shadow-md p-8">
                            <h2 class="text-2xl font-bold mb-6">Create New Shipment</h2>
                            <form onsubmit="handleCreateShipment(event)" class="space-y-6">
                                <div>
                                    <label for="shipment-name" class="block text-sm font-medium mb-2">Shipment Name</label>
                                    <input type="text" id="shipment-name" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="e.g., Electronics Order #1234">
                                </div>
                                
                                <div class="grid md:grid-cols-2 gap-6">
                                    <div>
                                        <label for="shipment-weight" class="block text-sm font-medium mb-2">Weight (kg)</label>
                                        <input type="number" id="shipment-weight" required min="0" step="0.1" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="1000">
                                    </div>
                                    <div>
                                        <label for="shipment-volume" class="block text-sm font-medium mb-2">Volume (m³)</label>
                                        <input type="number" id="shipment-volume" required min="0" step="0.1" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="15">
                                    </div>
                                </div>

                                <div>
                                    <label for="shipment-boxes" class="block text-sm font-medium mb-2">Number of Boxes</label>
                                    <input type="number" id="shipment-boxes" required min="1" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="50">
                                </div>

                                <div>
                                    <label for="shipment-destination" class="block text-sm font-medium mb-2">Destination</label>
                                    <input type="text" id="shipment-destination" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="City, State">
                                </div>

                                <div>
                                    <label for="shipment-date" class="block text-sm font-medium mb-2">Delivery Date</label>
                                    <input type="date" id="shipment-date" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                </div>

                                <button type="submit" class="btn-primary w-full text-white py-3 rounded-lg font-semibold">
                                    Create Shipment
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderOptimizationResults() {
            const config = window.elementSdk?.config || defaultConfig;
            const results = [
                { id: 'TRK-001', capacity: '20000 kg', utilization: 92, cost: 450, co2Savings: 180, score: 95 },
                { id: 'TRK-042', capacity: '18000 kg', utilization: 87, cost: 420, co2Savings: 165, score: 88 },
                { id: 'TRK-128', capacity: '22000 kg', utilization: 78, cost: 480, co2Savings: 195, score: 82 },
                { id: 'TRK-093', capacity: '16000 kg', utilization: 73, cost: 390, co2Savings: 142, score: 75 }
            ];

            return `
                ${renderNavbar()}
                <div class="w-full min-h-screen">
                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                        <button onclick="navigateTo('warehouse-dashboard')" class="flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                            </svg>
                            Back to Dashboard
                        </button>

                        <div class="bg-white rounded-xl shadow-md p-8">
                            <div class="flex items-center justify-between mb-6">
                                <div>
                                    <h2 class="text-2xl font-bold mb-2">Optimization Results</h2>
                                    <p class="text-gray-600">Found 4 trucks matching your requirements</p>
                                </div>
                                <div class="text-right">
                                    <div class="text-sm text-gray-600">Best Match Score</div>
                                    <div class="text-3xl font-bold" style="color: ${config.primary_color}">95%</div>
                                </div>
                            </div>

                            <div class="space-y-4">
                                ${results.map((truck, index) => `
                                    <div class="card-hover border rounded-xl p-6 ${index === 0 ? 'border-2' : 'border-gray-200'}" style="${index === 0 ? `border-color: ${config.primary_color}` : ''}">
                                        <div class="flex items-center justify-between mb-4">
                                            <div class="flex items-center gap-4">
                                                <div class="w-12 h-12 rounded-full flex items-center justify-center" style="background-color: ${config.primary_color}20">
                                                    <svg class="w-6 h-6" style="color: ${config.primary_color}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                                    </svg>
                                                </div>
                                                <div>
                                                    <div class="font-bold text-lg">${truck.id}</div>
                                                    <div class="text-sm text-gray-600">Max Capacity: ${truck.capacity}</div>
                                                </div>
                                            </div>
                                            ${index === 0 ? `<span class="px-3 py-1 rounded-full text-xs font-medium text-white" style="background-color: ${config.primary_color}">Best Match</span>` : ''}
                                        </div>

                                        <div class="grid grid-cols-4 gap-4 mb-4">
                                            <div>
                                                <div class="text-xs text-gray-600 mb-1">Utilization</div>
                                                <div class="text-xl font-bold">${truck.utilization}%</div>
                                            </div>
                                            <div>
                                                <div class="text-xs text-gray-600 mb-1">Estimated Cost</div>
                                                <div class="text-xl font-bold">$${truck.cost}</div>
                                            </div>
                                            <div>
                                                <div class="text-xs text-gray-600 mb-1">CO₂ Savings</div>
                                                <div class="text-xl font-bold">${truck.co2Savings} kg</div>
                                            </div>
                                            <div>
                                                <div class="text-xs text-gray-600 mb-1">Overall Score</div>
                                                <div class="text-xl font-bold">${truck.score}/100</div>
                                            </div>
                                        </div>

                                        <button onclick="requestBooking('${truck.id}')" class="w-full btn-primary text-white py-2 rounded-lg font-medium">
                                            Request Booking
                                        </button>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderDealerDashboard() {
            return `
                ${renderNavbar()}
                <div class="w-full min-h-screen">
                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                        <div class="mb-8">
                            <h1 class="text-3xl font-bold mb-2">Truck Dealer Dashboard</h1>
                            <p class="text-gray-600">Manage your fleet and booking requests</p>
                        </div>

                        <!-- Stats Grid -->
                        <div class="grid md:grid-cols-3 gap-6 mb-8">
                            <div class="stat-card">
                                <div class="text-sm font-medium text-gray-600 mb-1">Total Trucks</div>
                                <div class="text-3xl font-bold mb-1">${trucks.length}</div>
                                <div class="text-xs text-gray-500">In fleet</div>
                            </div>
                            <div class="stat-card">
                                <div class="text-sm font-medium text-gray-600 mb-1">Active Bookings</div>
                                <div class="text-3xl font-bold mb-1">${bookingRequests.filter(b => b.status === 'pending').length}</div>
                                <div class="text-xs text-green-600">Pending approval</div>
                            </div>
                            <div class="stat-card">
                                <div class="text-sm font-medium text-gray-600 mb-1">Avg Utilization</div>
                                <div class="text-3xl font-bold mb-1">82%</div>
                                <div class="text-xs text-green-600">+7% from last month</div>
                            </div>
                        </div>

                        <!-- Add Truck Button -->
                        <button onclick="navigateTo('add-truck')" class="btn-primary px-6 py-3 text-white rounded-lg font-semibold flex items-center gap-2 mb-8">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                            </svg>
                            Add New Truck
                        </button>

                        <!-- Booking Requests -->
                        <div class="bg-white rounded-xl shadow-md p-6 mb-8">
                            <h2 class="text-xl font-bold mb-4">Booking Requests</h2>
                            ${bookingRequests.length === 0 ? `
                                <div class="text-center py-8 text-gray-500">
                                    <p>No booking requests at the moment</p>
                                </div>
                            ` : `
                                <div class="space-y-4">
                                    ${bookingRequests.map(req => `
                                        <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <div class="font-bold text-lg mb-1">${req.truckId}</div>
                                                    <div class="text-sm text-gray-600">Requested on ${req.date}</div>
                                                </div>
                                                <div class="flex gap-2">
                                                    <button onclick="approveBooking('${req.id}')" class="btn-secondary px-4 py-2 text-white rounded-lg text-sm font-medium">
                                                        Approve
                                                    </button>
                                                    <button onclick="declineBooking('${req.id}')" class="px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium hover:bg-gray-50">
                                                        Decline
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    `).join('')}
                                </div>
                            `}
                        </div>

                        <!-- Truck Fleet -->
                        <div class="bg-white rounded-xl shadow-md p-6">
                            <h2 class="text-xl font-bold mb-4">Your Fleet</h2>
                            ${trucks.length === 0 ? `
                                <div class="text-center py-12 text-gray-500">
                                    <svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                    </svg>
                                    <p>No trucks in your fleet yet. Add your first truck to get started!</p>
                                </div>
                            ` : `
                                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
                                    ${trucks.map(truck => `
                                        <div class="card-hover border border-gray-200 rounded-lg p-4">
                                            <div class="font-bold text-lg mb-2">${truck.number}</div>
                                            <div class="text-sm text-gray-600 space-y-1">
                                                <div>Type: ${truck.type}</div>
                                                <div>Capacity: ${truck.capacity} kg</div>
                                                <div>Cost: $${truck.cost}/trip</div>
                                            </div>
                                        </div>
                                    `).join('')}
                                </div>
                            `}
                        </div>
                    </div>
                </div>
            `;
        }

        function renderAddTruck() {
            return `
                ${renderNavbar()}
                <div class="w-full min-h-screen">
                    <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                        <button onclick="navigateTo('dealer-dashboard')" class="flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                            </svg>
                            Back to Dashboard
                        </button>

                        <div class="bg-white rounded-xl shadow-md p-8">
                            <h2 class="text-2xl font-bold mb-6">Add New Truck</h2>
                            <form onsubmit="handleAddTruck(event)" class="space-y-6">
                                <div>
                                    <label for="truck-number" class="block text-sm font-medium mb-2">Truck Number</label>
                                    <input type="text" id="truck-number" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="e.g., TRK-001">
                                </div>
                                
                                <div>
                                    <label for="truck-type" class="block text-sm font-medium mb-2">Truck Type</label>
                                    <select id="truck-type" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                        <option value="">Select type</option>
                                        <option value="Standard">Standard</option>
                                        <option value="Refrigerated">Refrigerated</option>
                                        <option value="Flatbed">Flatbed</option>
                                        <option value="Heavy Duty">Heavy Duty</option>
                                    </select>
                                </div>

                                <div>
                                    <label for="truck-capacity" class="block text-sm font-medium mb-2">Max Capacity (kg)</label>
                                    <input type="number" id="truck-capacity" required min="0" step="100" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="20000">
                                </div>

                                <div>
                                    <label for="truck-routes" class="block text-sm font-medium mb-2">Service Routes</label>
                                    <input type="text" id="truck-routes" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="e.g., Northeast, Midwest">
                                </div>

                                <div>
                                    <label for="truck-cost" class="block text-sm font-medium mb-2">Cost per Trip ($)</label>
                                    <input type="number" id="truck-cost" required min="0" step="10" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="450">
                                </div>

                                <button type="submit" class="btn-primary w-full text-white py-3 rounded-lg font-semibold">
                                    Add Truck to Fleet
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderAnalytics() {
            const config = window.elementSdk?.config || defaultConfig;
            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'];
            const utilizationData = [65, 72, 78, 75, 82, 85];
            const co2Data = [1.2, 1.5, 1.8, 2.0, 2.2, 2.4];

            return `
                ${renderNavbar()}
                <div class="w-full min-h-screen">
                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                        <button onclick="navigateTo('${userRole === 'warehouse' ? 'warehouse-dashboard' : 'dealer-dashboard'}')" class="flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                            </svg>
                            Back to Dashboard
                        </button>

                        <div class="mb-8">
                            <h1 class="text-3xl font-bold mb-2">Analytics & Insights</h1>
                            <p class="text-gray-600">Track your optimization performance over time</p>
                        </div>

                        <!-- Charts -->
                        <div class="grid md:grid-cols-2 gap-8">
                            <!-- Utilization Chart -->
                            <div class="bg-white rounded-xl shadow-md p-6">
                                <h2 class="text-xl font-bold mb-6">Truck Utilization Trend</h2>
                                <div class="space-y-4">
                                    ${months.map((month, i) => `
                                        <div>
                                            <div class="flex justify-between text-sm mb-1">
                                                <span class="font-medium">${month}</span>
                                                <span class="font-bold">${utilizationData[i]}%</span>
                                            </div>
                                            <div class="w-full bg-gray-200 rounded-full h-3 overflow-hidden">
                                                <div class="chart-bar h-full rounded-full" style="width: ${utilizationData[i]}%; background-color: ${config.primary_color}"></div>
                                            </div>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>

                            <!-- CO2 Savings Chart -->
                            <div class="bg-white rounded-xl shadow-md p-6">
                                <h2 class="text-xl font-bold mb-6">CO₂ Emission Reduction</h2>
                                <div class="space-y-4">
                                    ${months.map((month, i) => `
                                        <div>
                                            <div class="flex justify-between text-sm mb-1">
                                                <span class="font-medium">${month}</span>
                                                <span class="font-bold">${co2Data[i]}t</span>
                                            </div>
                                            <div class="w-full bg-gray-200 rounded-full h-3 overflow-hidden">
                                                <div class="chart-bar h-full rounded-full" style="width: ${(co2Data[i] / 3) * 100}%; background-color: ${config.secondary_color}"></div>
                                            </div>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        </div>

                        <!-- Key Metrics -->
                        <div class="grid md:grid-cols-3 gap-6 mt-8">
                            <div class="bg-white rounded-xl shadow-md p-6 text-center">
                                <div class="text-sm font-medium text-gray-600 mb-2">Total Cost Savings</div>
                                <div class="text-4xl font-bold mb-1" style="color: ${config.primary_color}">$12,450</div>
                                <div class="text-sm text-gray-600">Over 6 months</div>
                            </div>
                            <div class="bg-white rounded-xl shadow-md p-6 text-center">
                                <div class="text-sm font-medium text-gray-600 mb-2">Trips Optimized</div>
                                <div class="text-4xl font-bold mb-1" style="color: ${config.secondary_color}">247</div>
                                <div class="text-sm text-gray-600">This period</div>
                            </div>
                            <div class="bg-white rounded-xl shadow-md p-6 text-center">
                                <div class="text-sm font-medium text-gray-600 mb-2">Efficiency Gain</div>
                                <div class="text-4xl font-bold mb-1" style="color: ${config.accent_color}">+31%</div>
                                <div class="text-sm text-gray-600">Year over year</div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function handleLogin(event) {
            event.preventDefault();
            userRole = 'warehouse';
            navigateTo('warehouse-dashboard');
        }

        function handleSignup(event) {
            event.preventDefault();
            const role = document.getElementById('signup-role').value;
            userRole = role;
            navigateTo(role === 'warehouse' ? 'warehouse-dashboard' : 'dealer-dashboard');
        }

        function handleCreateShipment(event) {
            event.preventDefault();
            const shipment = {
                name: document.getElementById('shipment-name').value,
                weight: document.getElementById('shipment-weight').value,
                volume: document.getElementById('shipment-volume').value,
                boxes: document.getElementById('shipment-boxes').value,
                destination: document.getElementById('shipment-destination').value,
                date: document.getElementById('shipment-date').value,
                status: 'active'
            };
            shipments.push(shipment);
            navigateTo('warehouse-dashboard');
        }

        function handleAddTruck(event) {
            event.preventDefault();
            const truck = {
                number: document.getElementById('truck-number').value,
                type: document.getElementById('truck-type').value,
                capacity: document.getElementById('truck-capacity').value,
                routes: document.getElementById('truck-routes').value,
                cost: document.getElementById('truck-cost').value
            };
            trucks.push(truck);
            navigateTo('dealer-dashboard');
        }

        function runOptimization() {
            if (shipments.length === 0) {
                const message = document.createElement('div');
                message.className = 'fixed top-4 right-4 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg';
                message.textContent = 'Please create at least one shipment first';
                document.body.appendChild(message);
                setTimeout(() => message.remove(), 3000);
                return;
            }
            navigateTo('optimization-results');
        }

        function requestBooking(truckId) {
            bookingRequests.push({
                id: 'REQ-' + Date.now(),
                truckId: truckId,
                date: new Date().toLocaleDateString(),
                status: 'pending'
            });
            
            const message = document.createElement('div');
            message.className = 'fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg';
            message.textContent = `Booking request sent for ${truckId}`;
            document.body.appendChild(message);
            setTimeout(() => message.remove(), 3000);
        }

        function approveBooking(id) {
            bookingRequests = bookingRequests.filter(r => r.id !== id);
            renderPage();
        }

        function declineBooking(id) {
            bookingRequests = bookingRequests.filter(r => r.id !== id);
            renderPage();
        }

        function logout() {
            userRole = null;
            shipments = [];
            trucks = [];
            bookingRequests = [];
            navigateTo('landing');
        }

        if (window.elementSdk) {
            window.elementSdk.init({
                defaultConfig,
                onConfigChange,
                mapToCapabilities: (config) => ({
                    recolorables: [
                        {
                            get: () => config.background_color || defaultConfig.background_color,
                            set: (value) => {
                                config.background_color = value;
                                window.elementSdk.setConfig({ background_color: value });
                            }
                        },
                        {
                            get: () => config.primary_color || defaultConfig.primary_color,
                            set: (value) => {
                                config.primary_color = value;
                                window.elementSdk.setConfig({ primary_color: value });
                            }
                        },
                        {
                            get: () => config.secondary_color || defaultConfig.secondary_color,
                            set: (value) => {
                                config.secondary_color = value;
                                window.elementSdk.setConfig({ secondary_color: value });
                            }
                        },
                        {
                            get: () => config.text_color || defaultConfig.text_color,
                            set: (value) => {
                                config.text_color = value;
                                window.elementSdk.setConfig({ text_color: value });
                            }
                        },
                        {
                            get: () => config.accent_color || defaultConfig.accent_color,
                            set: (value) => {
                                config.accent_color = value;
                                window.elementSdk.setConfig({ accent_color: value });
                            }
                        }
                    ],
                    borderables: [],
                    fontEditable: {
                        get: () => config.font_family || defaultConfig.font_family,
                        set: (value) => {
                            config.font_family = value;
                            window.elementSdk.setConfig({ font_family: value });
                        }
                    },
                    fontSizeable: {
                        get: () => config.font_size || defaultConfig.font_size,
                        set: (value) => {
                            config.font_size = value;
                            window.elementSdk.setConfig({ font_size: value });
                        }
                    }
                }),
                mapToEditPanelValues: (config) => new Map([
                    ["platform_name", config.platform_name || defaultConfig.platform_name],
                    ["tagline", config.tagline || defaultConfig.tagline],
                    ["primary_cta", config.primary_cta || defaultConfig.primary_cta],
                    ["secondary_cta", config.secondary_cta || defaultConfig.secondary_cta]
                ])
            });
        }

        renderPage();
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9b184a8067ce7f8b',t:'MTc2NjMyOTY2Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>